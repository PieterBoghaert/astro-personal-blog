---
import Base from '../../layouts/Base.astro';
import Header from '../../components/Header.astro';
import SocialShare from '../../components/SocialShare.astro';

export async function getStaticPaths() {
  const allPosts = await Astro.glob('/src/content/posts/**/*.md');
  return allPosts.map(post => ({
    params: { slug: post.frontmatter.slug },
    props: { post },
  }));
}

const { post } = Astro.props;
const { Content } = post;
const { title, publishedAt, date, description } = post.frontmatter;
const postDate = new Date(publishedAt || date);
---

<Base title={`${title} â€” Vulpo`}>
  <Header slot="header" />
  <div class="wrapper page-content">
    <article class="blog-post">
      <header class="blog-post__header">
        <h1 class="blog-post__title h2">{title}</h1>
        <time class="blog-post__date" datetime={postDate.toISOString()}>
          {postDate.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' })}
        </time>
        {description && <p class="blog-post__description">{description}</p>}
      </header>
      <div class="blog-post__content">
        <Content />
      </div>
    </article>
  </div>
</Base>
