@use "../util/" as u;

@layer layout {
  :root {
    --spacing-0: 0;
    --spacing-75: calc(6 / 16 * 1rem);
    --spacing-100: calc(8 / 16 * 1rem);
    --spacing-125: calc(10 / 16 * 1rem);
    --spacing-150: calc(12 / 16 * 1rem);
    --spacing-200: 1rem;
    --spacing-250: calc(20 / 16 * 1rem);
    --spacing-300: calc(24 / 16 * 1rem);
    --spacing-400: calc(32 / 16 * 1rem);
    --spacing-500: calc(40 / 16 * 1rem);
    --spacing-550: calc(44 / 16 * 1rem);
    --spacing-600: calc(48 / 16 * 1rem);
    --spacing-700: calc(60 / 16 * 1rem);

    --br-8: calc(8 / 16 * 1rem);
    --br-10: calc(10 / 16 * 1rem);
    --br-20: calc(20 / 16 * 1rem);
    --br-full: 50%;
    --wrapper-size: calc(640 / 16 * 1rem);
    --theme: light;

    @media (prefers-color-scheme: light) {
      --theme: light;
      color-scheme: light;
    }

    @media (prefers-color-scheme: dark) {
      --theme: dark;
      color-scheme: dark;
    }
  }

  /* Ensure footer sticks to bottom */
  .site {
    display: flex;
    flex-direction: column;
    min-height: 100vh;
    margin-block-start: var(--spacing-250);
  }

  .site__content {
    flex: 1 0 auto;
  }

  .warning {
    position: fixed;
    top: 0;
    inline-size: 100%;
    background-color: var(--c-purple-950);
    color: var(--c-white);
    padding-inline: var(--spacing-100);
    padding-block: var(--spacing-100);
    text-align: center;
  }

  body {
    color: var(--color-text);

    background-color: var(--color-bg);
    color-scheme: light;

    @container style(--theme: dark) {
      color-scheme: dark;
      background-image: url("/public/img/bg-mobile-dark.jpg");

      .main-header {
        .icon-moon {
          display: none;
        }

        .icon-sun {
          display: block;
        }
      }
    }

    @container style(--theme: dark) or style(--theme: light) {
      .warning {
        display: none;
      }
    }

    /* Fallback for Firefox: class-based theming */
    &.theme-dark {
      color-scheme: dark;

      .main-header .icon-moon {
        display: none;
      }

      .main-header .icon-sun {
        display: block;
      }
    }
  }

  .wrapper {
    inline-size: min(100% - var(--spacing-300), var(--wrapper-size));
    margin-inline: auto;
  }

  .main-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    color: var(--c-white);

    h1 {
      text-transform: uppercase;
      letter-spacing: 4px;
    }

    .icon-moon,
    .icon-sun {
      cursor: pointer;
    }

    .icon-sun {
      display: none;
    }
  }

  ::view-transition-old(root) {
    animation-delay: 500ms;
  }

  ::view-transition-new(root) {
    animation: circle-in 500ms;
  }

  @include u.breakpoint("medium") {
    body {
      @container style(--theme: dark) {
        color-scheme: dark;
      }
    }
  }

  @media (prefers-reduced-motion: no-preference) and (hover: hover) {
  }
}

/* pages */

.page-content {
  padding-block-start: var(--spacing-400);
  padding-inline: var(--spacing-125);
  border-inline: 1px solid
    light-dark(var(--c-neutral-200), var(--c-neutral-700));
  margin-inline: var(--spacing-125);

  section {
    padding-block-end: var(--spacing-400);
  }

  section:not(:first-of-type) {
    padding-block-start: var(--spacing-400);
  }
}

.home-intro {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-300);
}

.home-articles {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-400);
  border-top: 1px solid light-dark(var(--c-neutral-200), var(--c-neutral-700));

  &__list {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-300);
  }

  &__link {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-100);

    &:hover .home-articles__post-title {
      color: light-dark(var(--c-neutral-700), var(--c-neutral-300));
      text-decoration: underline;
    }
  }

  &__post-date {
    font-size: var(--fs-16);
    font-style: italic;
    color: light-dark(var(--c-neutral-600), var(--c-neutral-400));
  }

  &__post-title {
  }
}

.blog-list {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-500);
  margin-block: var(--spacing-550) var(--spacing-600);

  &__link {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-100);
  }
}
@include u.breakpoint("medium") {
  .page-content {
    padding-block-start: var(--spacing-600);

    section {
      padding-block-end: var(--spacing-600);
    }

    section:not(:first-of-type) {
      padding-block-start: var(--spacing-600);
    }
  }

  .blog-post__content {
    padding-block: var(--spacing-400);
  }
}

@include u.breakpoint("large") {
  .blog-post__content {
    margin-block: var(--spacing-600);
  }
}
